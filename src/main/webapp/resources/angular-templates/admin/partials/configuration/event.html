<div class="text-center" data-ng-if="eventConf.loading">
    <i class="fa fa-cog fa-spin fa-3x"></i><span class="sr-only">Loading...</span>
</div>
<div class="alert alert-warning" data-ng-if="eventConf.noResults">
    <h1>You are not authorized to see Organization-wide configuration.</h1>
    <span>Please try selecting an Event</span>
</div>
<div data-ng-if="eventConf.hasResults">
    <div class="page-header">
        <h1>General</h1>
        <span>General settings</span>
    </div>

    <form name="settingsForm" novalidate data-ng-submit="eventConf.saveSettings(settingsForm)">
        <div data-ng-if="eventConf.general">
            <div data-ng-repeat="setting in eventConf.general.settings">
                <setting data-obj="setting" data-display-delete-if-needed="true" data-global-settings="eventConf.globalSettings" data-delete-handler="eventConf.delete(config)"></setting>
            </div>
        </div>

        <div class="page-header">
            <h1>E-Mail</h1>
            <span>E-Mail settings</span>
        </div>

        <div data-ng-if="eventConf.mail">
            <div data-ng-if="eventConf.mail.type">
                <div class="radio-inline">
                    <label>
                        <input type="radio" name="mailer.type" data-ng-model="eventConf.mail.type.value" data-ng-value="'smtp'">
                        SMTP
                    </label>
                </div>
                <div class="radio-inline">
                    <label>
                        <input type="radio" name="mailer.type" data-ng-model="eventConf.mail.type.value" data-ng-value="'mailgun'">
                        Mailgun.com
                    </label>
                </div>
                <div data-ng-repeat="setting in eventConf.mail.settings | mailSettingsFilter:eventConf.mail.type.value">
                    <setting data-obj="setting" data-display-delete-if-needed="true" data-delete-handler="eventConf.delete(config)"></setting>
                </div>
                <div>
                    <setting obj="eventConf.mail.maxEmailPerCycle" data-display-delete-if-needed="true" data-delete-handler="eventConf.delete(config)"></setting>
                </div>
                <div>
                    <setting obj="eventConf.mail.mailReplyTo" data-display-delete-if-needed="true" data-delete-handler="eventConf.delete(config)"></setting>
                </div>
            </div>
            <div data-ng-repeat="setting in eventConf.mail.settings" data-ng-if="!eventConf.mail.type">
                <setting data-obj="setting" data-display-delete-if-needed="true" data-delete-handler="eventConf.delete(config)"></setting>
            </div>
        </div>

        <div class="page-header">
            <h1>Payment</h1>
            <span>Payment provider settings</span>
        </div>

        <div data-ng-if="eventConf.payment">
            <div data-ng-repeat="setting in eventConf.payment.settings">
                <setting data-obj="setting" data-display-delete-if-needed="true" data-delete-handler="eventConf.delete(config)"></setting>
            </div>
        </div>

        <div data-ng-if="eventConf.pluginSettingsByPluginId">
            <div class="page-header">
                <h1>Plugins</h1>
                <span>Plugins settings</span>
            </div>

            <div data-ng-repeat="(key, settings) in eventConf.pluginSettingsByPluginId">
                <div class="page-header"><h3 data-ng-bind="key"></h3></div>
                <div data-ng-repeat="setting in settings">
                    <setting data-obj="setting" data-display-delete-if-needed="true" data-organization="systemConf.organization"></setting>
                </div>
            </div>
        </div>

        <div class="pull-right wMarginBottom wMarginTop">
            <button type="submit" class="btn btn-success" data-ng-disabled="eventConf.loading">save</button>
            <a class="btn btn-default" data-ui-sref="index">cancel</a>
        </div>
    </form>
</div>